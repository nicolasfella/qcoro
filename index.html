<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="QCoro is a C++ framework for using coroutines with Qt">
        <meta name="author" content="Daniel Vrátil">
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>QCoro</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/cpp.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href=".">QCoro</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem active">
                                <a href="." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Coroutines <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="coroutines/qt-vs-coawait/" class="dropdown-item">Qt Signals/Slots vs co_await</a>
</li>
                                    
<li>
    <a href="coroutines/coawait/" class="dropdown-item">co_await Explained</a>
</li>
                                    
<li>
    <a href="coroutines/reading/" class="dropdown-item">More reading</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="reference/using/" class="dropdown-item">Using QCoro</a>
</li>
                                    
<li>
    <a href="reference/task/" class="dropdown-item">QCoro::Task</a>
</li>
                                    
<li>
    <a href="reference/qdbuspendingcall/" class="dropdown-item">QDBusPendingCall</a>
</li>
                                    
<li>
    <a href="reference/qfuture/" class="dropdown-item">QFuture</a>
</li>
                                    
<li>
    <a href="reference/qiodevice/" class="dropdown-item">QIODevice</a>
</li>
                                    
<li>
    <a href="reference/qnetworkreply/" class="dropdown-item">QNetworkReply</a>
</li>
                                    
<li>
    <a href="reference/qtimer/" class="dropdown-item">QTimer</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="about/license/" class="dropdown-item">License</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="coroutines/qt-vs-coawait/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/dvratil/qcoro" class="nav-link">QCoro on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#qcoro" class="nav-link">QCoro</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#coroutines" class="nav-link">Coroutines</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#reference" class="nav-link">Reference</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#supported-compilers" class="nav-link">Supported Compilers</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#using-qcoro" class="nav-link">Using QCoro</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="qcoro">QCoro</h1>
<p>C++ Coroutine library for Qt</p>
<hr />
<h2 id="overview">Overview</h2>
<p>QCoro is a C++ library that provide set of tools to make use of C++20 coroutines
in connection with certain asynchronous Qt actions.</p>
<p>Take a look at the example below to see what an amazing thing coroutines are:</p>
<pre><code class="cpp">QNetworkAccessManager networkAccessManager;
// co_await the reply - the coroutine is suspended until the QNetworkReply is finished.
// While the coroutine is suspended, *the Qt event loop runs as usual*.
const QNetworkReply *reply = co_await networkAccessManager.get(url);
// Once the reply is finished, your code resumes here as if nothing amazing has just happened ;-)
const auto data = reply-&gt;readAll();
</code></pre>

<p>This is a rather experimental library that I started working on to better understand coroutines
in C++.</p>
<p>With a single exception of <a href="reference/task/">QCoro::Task</a>, this library does not have any
classes, functions or types that users of this library need to use directly. All this library does is
providing behind-the-scenes machinery for the C++ coroutine system. The machinery is automatically
invoked when you use <code>co_await</code> with one of the supported Qt types.</p>
<p>The major benefit of using coroutines with Qt types is that it allows writing asynchronous code as if it
were synchronous and, most importantly, while the coroutine is <code>co_await</code>ing, the <strong>Qt event loop runs
as usual</strong>, meaning that your application remains responsive.</p>
<h2 id="coroutines">Coroutines</h2>
<p>Coroutines are regular functions, except that they can be suspended and resumed again. When
a coroutine is suspended, it returns sort of a promise to the caller and the caller continues
executing their code. At some point, the caller can use the newly introduced <code>co_await</code> keyword
to wait for the returned promise to be fulfilled. When that happens, the caller is suspended
and instead the coroutine is resumed.</p>
<p>This allows writing asynchronous code as if it were synchronous, making it much easier to read
and understand.</p>
<p>That's not all that coroutines can do, you can read more about it in the 'Coroutines' section
of this documentation.</p>
<h2 id="reference">Reference</h2>
<p>Check the Reference section for list of Qt types that you can now use with C++ coroutines
and for more detailed documentation on how to use them.</p>
<h2 id="supported-compilers">Supported Compilers</h2>
<p>This library requires a compiler that supports the Coroutine TS (obviously). Currently
GCC and Clang are supported, MSVC should be possible too, but I haven't tried.</p>
<p>All examples were tested with GCC 10 and Clang 11, although even slightly older versions
should work.</p>
<p>In both GCC and Clang, coroutine support must be explicitly enabled:</p>
<h3 id="gcc">GCC</h3>
<p>To enable coroutines support in GCC, add <code>-fcoroutines</code> to <code>CXX_FLAGS</code>.</p>
<p>CMake:</p>
<pre><code>set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fcoroutines&quot;)
</code></pre>

<h3 id="clang">Clang</h3>
<p>In Clang coroutines are still considered experimental (unlike in GCC), so
you cannot mix Clang and libstdc++. You must use Clang with libc++. Coroutines
are enabled by adding <code>-fcoroutines-ts</code> to <code>CMAKE_CXX_FLAGS</code>.</p>
<p>CMake:</p>
<pre><code>set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -fcoroutines-ts -stdlib=libc++&quot;)
</code></pre>

<h3 id="msvc">MSVC</h3>
<p>Currently not supported by QCoro, although MSVC does have full implementation of the
Coroutines TS. It should be fairly easy to make QCoro work with MSVC, though. If you
are willing to help, please od get in touch.</p>
<h2 id="using-qcoro">Using QCoro</h2>
<p>Using QCoro is easy and only requires a few steps:</p>
<p>1) Get QCoro, build and install it</p>
<pre><code class="shell">git clone https://github.com/danvratil/qcoro.git
cd qcoro
mkdir build
cd build
cmake ..
make
# This will install QCoro into /usr/local/ prefix, change it by passing -DCMAKE_INSTALL_PREFIX=/usr
# to the cmake command above.
sudo make install
</code></pre>

<p>Alternatively, if you don't want to install QCoro into your system, you can just clone the repository (or add 
it as a git submodule) to your project. Since QCoro is a header-only library, you just need to update your
project's include paths to pick up the <code>qcoro</code> header directory.</p>
<p>2) Add it to your CMake:</p>
<pre><code class="cmake">find_package(QCoro REQUIRED)
</code></pre>

<p>3) Use it in your code</p>
<pre><code class="cpp">// If you want to use co_await with QDBusPendingCall...
#include &lt;qcoro/dbus.h&gt;
// If you want to use co_await with QNetworkReply...
#include &lt;qcoro/network.h&gt;
// If you want to use co_await with QFuture...
#include &lt;qcoro/future.h&gt;
// ... you get the idea.
</code></pre>

<p>And that's it!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy <a href="https://www.dvratil.cz">Daniel Vrátil</a>, all contents published under <a href="https://www.gnu.org/licenses/fdl-1.3.html">GNU FDL 1.3</a>, unless stated otherwise.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.1.2
Build Date UTC : 2021-03-29 21:50:57.585213+00:00
-->
